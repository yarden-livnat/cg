{"version":3,"sources":["app.es6"],"names":[],"mappings":";;;;;;;;;;;AAiBA,MAAI,GAAG,GAAG,aAAI,KAAK,CAAC,CAAC;AACrB,MAAI,SAAS,GAAG,aAAM,SAAS,EAAE,CAAC;AAClC,MAAI,EAAE,GAAG,qBAAI,CAAC;AACd,MAAI,IAAI,GAAG,YAAM,CAAC;;AAElB,UAAO,SAAS,CAAC,EAAC,OAAO,EAAC,MAAM,EAAE,KAAK,EAAC,SAAS,EAAE,QAAQ,EAAE,oBAAM;AACjE,eAAS,CAAC,MAAM,GAAG,cAAK,MAAM,CAAC;KAChC,EAAC,CAAC,CAAC;;AAEJ,UAAO,SAAS,CAAC,EAAC,OAAO,EAAC,MAAM,EAAE,KAAK,EAAC,OAAO,EAAE,QAAQ,EAAE,oBAAM;AAAC,iBAAW,EAAE,CAAA;KAAC,EAAC,CAAC,CAAC;;AAEnF,UAAQ,EAAE,CAAC;AACX,gBAAK,IAAI,EAAE,CAAC;;AAGZ,WAAS,OAAO,CAAC,EAAE,EAAE;AACnB,QAAI,IAAI,GAAG,IAAG,MAAM,CAAC,EAAE,CAAC,CAAC;AACzB,QAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;AACtC,QAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;;AAEvC,WAAO,CAAC,GAAG,CAAC,SAAS,GAAC,EAAE,GAAC,IAAI,GAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAE,GAAG,GAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;AAElG,WAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;GACxE;;AAED,WAAS,MAAM,GAAG;AAChB,MAAE,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;AAC1B,QAAI,CAAC,MAAM,EAAE,CAAC;GACf;;AAED,WAAS,QAAQ,GAAG;AAClB,sBAAO,IAAI,EAAE,CAAC;;AAEd,QAAI,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;AAC/D,QAAI,cAAc,EAAE;AAClB,qBAAa,cAAc,EAAE;AAC3B,eAAO,EAAE,QAAQ;OAClB,CAAC,CAAC;KACJ;;AAED,UAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;GAC3C;;AAED,WAAS,WAAW,GAAG;AACrB,WAAM,IAAI,EAAE,CAAC;;AAEb,OAAG,CAAC,UAAU,CAAC,cAAK,UAAU,CAAC,CAC5B,SAAS,CAAC,SAAS,CAAC,CACpB,IAAI,EAAE,CAAC;;AAEV,MAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CACX,SAAS,CAAC,SAAS,CAAC,CAAC;;AAExB,QAAI,CAAC,IAAI,EAAE,CACR,SAAS,CAAC,SAAS,CAAC,CAAC;;AAExB,UAAM,EAAE,CAAC;GACV","file":"app.js","sourcesContent":["/**\n * Created by yarden on 6/30/15.\n */\n\nimport * as xpanel from './components/xpanel'\nimport * as Formater from 'formatter'\nimport * as d3 from 'd3'\nimport * as postal from 'postal'\n\nimport * as data from './services/data';\nimport * as query from 'query';\nimport * as Map from 'map/map'\nimport CG from 'cg/cg';\nimport * as Info from 'info';\n\nimport * as model from 'model/models'\n\nlet map = Map('map');\nlet selection = model.selection();\nlet cg = CG();\nlet info = Info();\n\npostal.subscribe({channel:'data', topic:'changed', callback: () => {\n  selection.domain = data.domain; //map(function(d) { return d.id;});\n}});\n\npostal.subscribe({channel:'data', topic:'ready', callback: () => {initModules()}});\n\ninitHTML();\ndata.init();\n\n\nfunction getSize(el) {\n  let d3el = d3.select(el);\n  let w = parseInt(d3el.style('width'));\n  let h = parseInt(d3el.style('height'));\n\n  console.log('resize '+el+': '+parseInt(d3el.style('width')) +'x'+ parseInt(d3el.style('height')));\n\n  return [parseInt(d3el.style('width')), parseInt(d3el.style('height'))];\n}\n\nfunction resize() {\n  cg.resize(getSize('#cg'));\n  info.resize();\n}\n\nfunction initHTML() {\n  xpanel.init();\n\n  let duration_input = document.getElementById('duration-input');\n  if (duration_input) {\n    new Formater(duration_input, {\n      pattern: \"{{99}}\"\n    });\n  }\n\n  window.addEventListener('resize', resize);\n}\n\nfunction initModules() {\n  query.init();\n\n  map.population(data.population)\n    .selection(selection)\n    .init();\n\n  cg.init('#cg')\n    .selection(selection);\n\n  info.init()\n    .selection(selection);\n\n  resize();\n}"]}