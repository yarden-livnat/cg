{"version":3,"sources":["chart.es6"],"names":[],"mappings":"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","file":"chart.js","sourcesContent":["/**\n * Created by yarden on 7/23/15.\n */\n\nimport * as d3 from 'd3'\n\nexport default function() {\n\n  let data;\n  let margin = {top:5, right: 30, bottom: 20, left:0};\n  let width = 350 - margin.left - margin.right,\n      height = 150 - margin.top - margin.bottom;\n\n  let svg, svgContainer;\n\n  let x = d3.time.scale()\n    .range([0, width])\n    .nice(5);\n\n  let y = d3.scale.linear()\n      .range([height, 0]);\n\n  let xAxis = d3.svg.axis()\n    .scale(x)\n    .orient('bottom')\n    .tickSize(3, 0)\n    .tickPadding(6)\n    .ticks(4);\n\n  let yAxis = d3.svg.axis()\n    .scale(y)\n    .orient('right')\n    .tickSize(3)\n    .tickPadding(6)\n    .ticks(4);\n\n  let line = d3.svg.line()\n    //.interpolate('step-after')\n    .interpolate('cardinal')\n    .x( d => { return x(d.date); })\n    .y( d => { return y(d.value); });\n\n  let zoom = d3.behavior.zoom()\n    .on('zoom', draw);\n\n  function resize(w, h) {\n    svgContainer\n      .attr('width', w)\n      .attr('height', h);\n\n    width = w -margin.left - margin.right;\n    height = h -margin.top - margin.bottom;\n\n    x.range([0, width]);\n    y.range([height, 0]);\n\n    xAxis.tickSize(3);\n    yAxis.tickSize(3);\n\n    let xr = x.range();\n    let yr = y.range();\n\n    svg.select('#clip rect')\n      .attr('x', xr[0])\n      .attr('y', yr[1])\n      .attr('width', xr[1]-xr[0])\n      .attr('height', yr[0]-yr[1]);\n\n    svg.select('g.y.axis')\n      .attr('transform', 'translate(' + width + ',0)');\n\n    svg.select('g.x.axis')\n      .attr('transform', 'translate(0,' + height + ')');\n\n    svg.select('.pane')\n      .attr('width', width)\n      .attr('height', height)\n      .call(zoom);\n  }\n\n  function init() {\n    let xr = x.range();\n    let yr = y.range();\n    svg.append('clipPath')\n        .attr('id', 'clip')\n      .append('rect')\n        .attr('x', xr[0])\n        .attr('y', yr[1])\n        .attr('width', xr[1]-xr[0])\n        .attr('height', yr[0]-yr[1]);\n\n    svg.append('g')\n      .attr('class', 'y axis')\n      .attr('transform', 'translate(' + width + ',0)');\n\n    svg.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\");\n\n    svg.append(\"path\")\n      .attr(\"class\", \"line\")\n      .attr(\"clip-path\", \"url(#clip\");\n\n    svg.append(\"rect\")\n      .attr(\"class\", \"pane\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .call(zoom);\n  }\n\n  function draw() {\n    if (data) {\n      svg.select('g.x.axis').call(xAxis);\n      svg.select('g.y.axis').call(yAxis);\n\n      let lines = svg.selectAll('path.line')\n        .data(data)\n        .attr('stroke', d => { return d.color; })\n        .attr('stroke-dasharray', d => { return d.marker == 'dash' ? '3' : '0'; })\n        .attr('d', d => { return line(d.values); });\n\n      lines.exit().remove();\n    }\n  }\n\n  function api() {}\n\n  api.el = function(el, opt) {\n    let selection = typeof el =='string' ? d3.select(el) : el;\n    selection.attr('class', 'chart');\n\n    svgContainer = selection.append('svg')\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom);\n\n    svg = svgContainer.append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top+ ')');\n\n    init();\n    return this;\n  };\n\n  api.resize = function(w, h) {\n    resize(w, h);\n    if (data) draw();\n  };\n\n  api.data = function(series) {\n    data = series;\n    if (data.length > 0) {\n      let n = series.length;\n      let x_min = series[0].values[0].date;\n      let x_max = series[0].values[series[0].values.length-1].date;\n      let y_max = 0;\n      for (let s of series) {\n        y_max = Math.max(y_max, d3.max(s.values, d => { return d.value; }));\n      }\n      x.domain([x_min, x_max]);\n      y.domain([0, y_max]);\n      zoom.x(x);\n    }\n\n    let lines = svg.selectAll('path.line')\n        .data(data)\n      .enter()\n        .append('path')\n        .attr('class', 'line')\n        .attr(\"clip-path\", \"url(#clip)\");\n\n    draw();\n    return this;\n  };\n\n  api.resize = function(size) {\n    resize(size[0], size[1]);\n    draw();\n    return this;\n  };\n\n  return api;\n}"]}