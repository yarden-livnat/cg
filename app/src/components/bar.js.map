{"version":3,"sources":["bar.es6"],"names":[],"mappings":"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","file":"bar.js","sourcesContent":["/**\n * Created by yarden on 8/8/15.\n */\n\nimport * as d3 from 'd3'\n\nexport default function() {\n\n  let margin = {left: 0, top: 0, right: 0, bottom: 0};\n  let max = 1;\n  let width = 50, height = 14;\n  let duration = 500;\n\n  function widthFunc(x) {\n    let x0 = x(0);\n    return function(d) { return Math.abs(x(d) - x0); };\n  }\n\n  function bar(selection) {\n    selection.each( function(d) {\n      let x1 = d3.scale.linear().domain([0, max]).range([0, width - margin.left - margin.right]);\n\n      let x0 = this.__chart__ || d3.scale.linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      let w0 = widthFunc(x0);\n      let w1 = widthFunc(x1);\n\n      let svg = d3.select(this).selectAll('svg').data([d]);\n      svg.enter().append('svg')\n        .attr('class', 'bar')\n        .append('g')\n        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      svg.attr('width', width)\n        .attr('height', height);\n\n      let range = svg.select('g').selectAll('rect').data([d.value]);\n\n      range.enter().append('rect')\n        .attr('width', w0)\n        .attr('height', height)\n        .transition()\n        .duration(duration)\n        .attr('width', w1);\n\n      range.transition()\n        .duration(duration)\n        .attr('width', w1)\n        .attr('height', height);\n\n      let labels = svg.select('g').selectAll('text').data([d.value]);\n      labels.enter().append('text')\n        .attr('y', 10)\n        .attr('x', (d, i) => i*(width-20));\n\n      labels.text( d => d);\n    });\n  }\n\n  bar.width = function(x) {\n    if (!arguments.length) return width;\n    width = x;\n    return this;\n  };\n\n  bar.max = function(v) {\n    if (!arguments.length) return max;\n    max = v;\n    return this;\n  };\n\n  return bar;\n}\n"]}