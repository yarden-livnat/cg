{"version":3,"sources":["service.es6"],"names":[],"mappings":";;;;;;;;;;UAcgB,IAAI,GAAJ,IAAI;;;;;;;;AAPpB,MAAI,UAAU,GAAG,gBAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;AAErC,MAAI,MAAM,GAAG,EAAE,CAAC;UAAZ,MAAM,GAAN,MAAM;AACV,MAAI,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;UAAtB,SAAS,GAAT,SAAS;AACb,MAAI,SAAS,GAAG,EAAE,CAAC;UAAf,SAAS,GAAT,SAAS;AACb,MAAI,SAAS,GAAG,EAAE,CAAC;;UAAf,SAAS,GAAT,SAAS;;AAEb,WAAS,IAAI,CAAC,EAAE,EAAE;AACrB,6BAAO,CACJ,KAAK,CAAC,gBAAG,IAAI,EAAE,UAAU,CAAC,CAC1B,KAAK,CAAC,gBAAG,IAAI,EAAE,iBAAiB,CAAC,CACjC,KAAK,CAAC,gBAAG,IAAI,EAAE,iBAAiB,CAAC,CACjC,KAAK,CAAE,UAAC,GAAG,EAAE,EAAE,EAAE,aAAa,EAAE,aAAa,EAAK;AACjD,UAAI,CAAC,GAAG,EAAE;AACR,UAAE,CAAC,OAAO,CAAC,UAAA,CAAC,EAAI;AACd,WAAC,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAC,GAAG,GAAC,CAAC,CAAC,OAAO,GAAC,GAAG,CAAC;AAC9D,mBAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;SACxB,CAAC,CAAC;;AAEH,gBAjBC,MAAM,GAiBP,MAAM,GAAG,EAAE,CAAC;AACZ,gBAhBC,SAAS,GAgBV,SAAS,GAAG,aAAa,CAAC;AAC1B,gBAhBC,SAAS,GAgBV,SAAS,GAAG,aAAa,CAAC;OAC3B;AACD,QAAE,CAAC,GAAG,CAAC,CAAC;KACT,CAAC,CAAC;GACR","file":"service.js","sourcesContent":["/**\n * Created by yarden on 8/21/15.\n */\n\nimport d3 from 'd3';\nimport queue from 'queue';\n\nlet dateFormat = d3.time.format('%Y-%m-%d');\n\nexport let topics = [];\nexport let topicsMap = new Map();\nexport let pathogens = [];\nexport let detectors = [];\n\nexport function init(cb) {\n    queue()\n      .defer(d3.json, '/data/kb')\n      .defer(d3.json, '/info/pathogens')\n      .defer(d3.json, '/info/detectors')\n      .await( (err, kb, pathogensList, detectorsList) => {\n        if (!err) {\n          kb.forEach(d => {\n            d.label = d.details == '' ? d.name : d.name+'['+d.details+']';\n            topicsMap.set(d.id, d);\n          });\n\n          topics = kb;\n          pathogens = pathogensList;\n          detectors = detectorsList;\n        }\n        cb(err);\n      });\n}"]}