{"version":3,"sources":["renderers.es6"],"names":[],"mappings":"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","file":"renderers.js","sourcesContent":["/**\n * Created by yarden on 8/25/15.\n */\n\n\nexport function NodeRenderer() {\n  let scaleFunc;\n  let radius;\n  let x, y;\n\n  function render(selection) {\n    let g = selection.append('g')\n        .attr('class', 'node')\n        .style('opacity', 0.1)\n      ;\n\n    g.append('circle')\n      .attr('class', 'circle')\n      .attr('r', radius)\n      //.on('mouseover', mouseover)\n      //.on('mouseout', mouseout)\n    ;\n\n    //let tag = g.append('g');\n    //  //.attr('class', 'tag');\n\n    let scaled = g.append('g')\n      .attr('class', 'scaledTag')\n      .attr('transform', 'translate(7, 0) scale(0.1)');\n\n    let frame = scaled.append('g')\n        .classed('frame', true)\n        .style('opacity', 0)\n    //.attr('visibility', 'hidden')\n      ;\n\n    frame.append('rect')\n      .classed('border', true);\n\n    frame.append('rect')\n      .classed('bg', true);\n\n    scaled.append('text')\n      .attr('class', 'tag')\n      .attr('stroke', function (d) { return d.color; })\n      .attr('fill', function (d) { return d.color; })\n      .attr('dy', '.35em')\n      .attr('text-anchor', 'start')\n      .text(function (d) {return d.label; });\n\n    scaled.each(function(d) {\n      let text = this.childNodes[1];\n      let bbox = text.getBBox();\n\n      d.w = bbox.width;\n      d.h = bbox.height;\n\n      d3.select(this).select('.bg')\n        .attr('width', bbox.width-2)\n        .attr('height', bbox.height-2)\n        .attr('x', bbox.x+1)\n        .attr('y', bbox.y+1);\n\n      d3.select(this).select('.border')\n        .attr('width', bbox.width)\n        .attr('height', bbox.height)\n        .attr('y', bbox.y);\n    });\n\n    return g;\n  }\n\n  render.update = function(selection) {\n    selection.select('.scaledTag')\n      .attr('transform', function (d) {\n        return 'translate(7, 0) scale(' + scaleFunc(d.scale) + ')';\n      }\n    );\n    selection.select('.frame')\n      .style('opacity', d => (d.selected || d.excluded) ? 1: 0);\n  };\n\n  render.scaleFunc = function(_) {\n    if (!arguments.length) return scaleFunc;\n    scaleFunc = _;\n    return this;\n  };\n\n  render.radius = function(_) {\n    if (!arguments.length) return radius;\n    radius = _;\n    return this;\n  };\n\n  render.x = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return this;\n  };\n\n  render.y = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return this;\n  };\n\n  return render;\n}\n\n\nexport function EdgeRenderer() {\n  let scale = d => d;\n  let opacity = 0.5;\n  let duration = 0;\n  let x = d => d;\n  let y = d => d;\n\n  function renderer(selection) {\n      selection.append('line')\n        .attr('class', 'link')\n        .style('stroke-width', '1px') //function (d) { return scale(d.value) + '1px'; })\n        .style('stroke', d3.hsl(0, 1, 1))\n        //.on('mouseover', highlightEdge)\n        //.on('mouseout', unhighlightEdge)\n        .style('opacity', 0)\n        .transition()\n        .duration(duration)\n          .style('opacity', opacity)\n          .style('stroke', function(d) { return d3.hsl(d.r > 0 ? 0 : 130, 0.8, scale(d.value)); })\n          //.styleTween('stroke', function(d, a) { return d3.interpolateHsl(a /*d3.hsl(0, 1, 1)*/, d3.hsl(0, 0.8, scale(d.value))); })\n      ;\n  }\n\n  renderer.update = function(selection) {\n    this\n      .attr('x1', function(d) { return x(d.source.x); })\n      .attr('y1', function(d) { return y(d.source.y); })\n      .attr('x2', function(d) { return x(d.target.x); })\n      .attr('y2', function(d) { return y(d.target.y); });\n\n  };\n\n  renderer.scale = function(_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return this;\n  };\n\n  renderer.opacity = function (_) {\n    if (!arguments.length) return opacity;\n    opacity = _;\n    return this;\n  };\n\n  renderer.duration = function(_) {\n    if (!arguments.length) return duration;\n    duration = _;\n    return this;\n  };\n\n  renderer.x = function(_) {\n    if (!arguments.length) return x;\n    x = _;\n    return this;\n  };\n\n  renderer.y = function(_) {\n    if (!arguments.length) return y;\n    y = _;\n    return this;\n  };\n\n  return renderer;\n}\n\n"]}