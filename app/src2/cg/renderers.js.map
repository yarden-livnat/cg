{"version":3,"sources":["renderers.es6"],"names":[],"mappings":"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","file":"renderers.js","sourcesContent":["/**\n * Created by yarden on 8/25/15.\n */\n\n\nexport function NodeRenderer() {\n  let scaleFunc;\n  let radius;\n\n  function render() {\n    let g = this.append('g')\n        .attr('class', 'node')\n        .style('opacity', 0.1)\n    //.on('mousedown', mousedown)\n    //.on('mouseup', mouseup)\n    //.on(\"dblclick\", dblclick)\n      ;\n\n    g.append('circle')\n      .attr('class', 'circle')\n      .attr('r', radius)\n      //.on('mouseover', mouseover)\n      //.on('mouseout', mouseout)\n    ;\n\n    let tag = g.append('g')\n      .attr('class', 'tag');\n\n    let scaled = tag.append('g')\n      .attr('class', 'scaledTag');\n\n    let frame = scaled.append('g')\n        .classed('frame', true)\n        .style('opacity', 0)\n    //.attr('visibility', 'hidden')\n      ;\n\n    frame.append('rect')\n      .classed('border', true);\n\n    frame.append('rect')\n      .classed('bg', true);\n\n    scaled.append('text')\n      .attr('class', 'tag')\n      .attr('stroke', function (d) { return d.color; })\n      .attr('fill', function (d) { return d.color; })\n      .attr('dy', '.35em')\n      .attr('text-anchor', 'start')\n      .text(function (d) {return d.label; });\n\n    scaled.each(function(d) {\n      let text = this.childNodes[1];\n      let bbox = text.getBBox();\n\n      d.w = bbox.width;\n      d.h = bbox.height;\n\n      d3.select(this).select('.bg')\n        .attr('width', bbox.width-2)\n        .attr('height', bbox.height-2)\n        .attr('x', bbox.x+1)\n        .attr('y', bbox.y+1);\n\n      d3.select(this).select('.border')\n        .attr('width', bbox.width)\n        .attr('height', bbox.height)\n        .attr('y', bbox.y);\n\n    });\n\n    scaled.call(render.scale);\n\n    g.attr('transform', function (d) { return 'translate(' + x(d.x) + ',' + y(d.y) + ')'; });\n    g.call(drag);\n\n    return this;\n  }\n\n  render.scale = function(node) {\n    node.attr('transform', function (d) {\n        return 'translate(7, 0) scale(' + scaleFunc(d.scale) + ')';\n      }\n    );\n    return this;\n  };\n\n  render.scaleFunc = function(_) {\n    if (!arguments.length) return scaleFunc;\n    scaleFunc = _;\n    return this;\n  };\n\n  render.radius = function(_) {\n    if (!arguments.length) return radius;\n    radius = _;\n    return this;\n  };\n\n  return render;\n}\n\n\n"]}