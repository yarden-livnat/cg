{"version":3,"sources":["xpanel.es6"],"names":[],"mappings":";;;;;;;;;;;;;UAsCgB,IAAI,GAAJ,IAAI;;;;AAhCpB,WAAS,UAAU,CAAC,SAAS,EAAE;AAC7B,aAAS,CAAC,IAAI,CAAC,YAAW;AACxB,UAAI,MAAM,GAAG,IAAG,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;AACvD,UAAI,IAAI,GAAG,IAAG,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;AACnD,UAAI,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;AACtC,UAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;;AAEvC,UAAI,IAAI,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;AACzB,UAAI,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC5B,UAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,cAAc,CAAC,CAC7C,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CACnB,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,CACtB,OAAO,CAAC,gBAAgB,EAAE,MAAM,CAAC,CACjC,OAAO,CAAC,eAAe,EAAE,CAAC,MAAM,CAAC,CAAC;AACrC,UAAI,IAAI,EAAE;AACR,cAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OAClC;AACD,YAAM,CAAC,EAAE,CAAC,OAAO,EAAE,YAAW;AAC5B,cAAM,GAAG,CAAC,MAAM,CAAC;AACjB,cAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AACjC,YAAI,CACD,OAAO,CAAC,gBAAgB,EAAE,MAAM,CAAC,CACjC,OAAO,CAAC,eAAe,EAAE,CAAC,MAAM,CAAC,CAAC;AACrC,YAAI,CACD,UAAU,EAAE,CACZ,KAAK,CAAC,YAAY,EAAE,MAAM,GAAG,CAAC,CAAC,GAAC,IAAI,GAAG,KAAK,CAAC,CAAC;OAClD,CAAC,CAAC;;AAEH,UAAI,CAAC,KAAK,CAAC,YAAY,EAAE,MAAM,GAAG,CAAC,CAAC,GAAC,IAAI,GAAG,KAAK,CAAC,CAAC;KACpD,CAAC,CAAC;GACJ;;AAEM,WAAS,IAAI,GAAG;AACrB,cAAU,CAAC,IAAG,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;GACtC;;MAEY,MAAM;AACN,aADA,MAAM,CACL,EAAE,EAAE;;;4BADL,MAAM;;AAEf,UAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,UAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACX,UAAI,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC1C,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;AACzE,UAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC;AACrE,UAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CACrC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CACzB,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC,CACtC,OAAO,CAAC,eAAe,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CACtC,EAAE,CAAC,OAAO,EAAG;eAAM,MAAK,OAAO,CAAC,CAAC,MAAK,MAAM,CAAC;OAAA,CAAC,CAAC;KACnD;;iBAZU,MAAM;;aAcV,iBAAC,CAAC,EAAE;AACT,YAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAChB,YAAI,CAAC,KAAK,CACP,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC,CACtC,OAAO,CAAC,eAAe,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC1C,YAAI,CAAC,KAAK,CACP,UAAU,EAAE,CACZ,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,GAAC,IAAI,GAAG,KAAK,CAAC,CAAC;OAC5D;;;aAMK,kBAAG;AACP,YAAI,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC9C,YAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,GAAC,IAAI,GAAG,KAAK,CAAC,CAAC;OACpE;;;WAPS,YAAG;AAAE,eAAO,IAAI,CAAC,OAAO,CAAC;OAAE;;;WAC7B,YAAG;AAAE,eAAO,IAAI,CAAC,KAAK,CAAC;OAAC;;;WACxB,YAAG;AAAE,eAAO,IAAI,CAAC,KAAK,CAAC;OAAE;;;WA1BtB,MAAM;;;UAAN,MAAM,GAAN,MAAM","file":"xpanel.js","sourcesContent":["/**\n * Created by yarden on 5/31/15.\n */\n\nimport * as d3 from 'd3';\n\nfunction initialize(selection) {\n  selection.each(function() {\n    var header = d3.select(this).select('.x-panel-header');\n    var body = d3.select(this).select('.x-panel-body');\n    var closed = header.classed('closed');\n    var h = parseInt(body.style('height'));\n\n    var text = header.text();\n    if (text) header.text(null);\n    var icon = header.insert('span', ':first-child')\n      .classed('fa', true)\n      .classed('fa-fw', true)\n      .classed('fa-caret-right', closed)\n      .classed('fa-caret-down', !closed);\n    if (text) {\n      header.append('text').text(text);\n    }\n    header.on('click', function() {\n      closed = !closed;\n      header.classed('closed', closed);\n      icon\n        .classed('fa-caret-right', closed)\n        .classed('fa-caret-down', !closed);\n      body\n        .transition()\n        .style('margin-top', closed ? -h+'px' : '0px');\n    });\n\n    body.style('margin-top', closed ? -h+'px' : '0px');\n  });\n}\n\nexport function init() {\n  initialize(d3.selectAll('.x-panel'));\n}\n\nexport class XPanel {\n  constructor(el) {\n    this.closed = false;\n    this.h = 0;\n    this._panel = el.classed('x-panel', true);\n    this._header = this._panel.append('div').attr('class', 'x-panel-header');\n    this._body = this._panel.append('div').attr('class', 'x-panel-body');\n    this._icon = this._header.append('span')\n      .attr('class', 'fa fa-fw')\n      .classed('fa-caret-right', this.closed)\n      .classed('fa-caret-down', !this.closed)\n      .on('click',  () => this.onClick(!this.closed));\n  }\n\n  onClick(_) {\n    this.closed = _;\n    this._icon\n      .classed('fa-caret-right', this.closed)\n      .classed('fa-caret-down', !this.closed);\n    this._body\n      .transition()\n      .style('margin-top', this.closed ? -this.h+'px' : '0px');\n  }\n\n  get header() { return this._header; }\n  get body() { return this._body;}\n  get icon() { return this._icon; }\n\n  update() {\n    this.h = parseInt(this._body.style('height'));\n    this._body.style('margin-top', this.closed ? -this.h+'px' : '0px');\n  }\n}"]}