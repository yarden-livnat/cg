{"version":3,"sources":["bullet.es6"],"names":[],"mappings":"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","file":"bullet.js","sourcesContent":["/**\n * Created by yarden on 8/7/15.\n */\n\nimport * as d3 from 'd3'\n\nexport default function() {\n\n  let margin = {left: 2, top: 2, right: 2, bottom: 2};\n  let value;\n  let width = 50, height = 18;\n  let duration = 500;\n\n  function bulletWidth(x) {\n    let x0 = x(0);\n    return function(d) { return Math.abs(x(d) - x0); };\n  }\n\n  function bullet(selection) {\n    selection.each( function(d) {\n      let values = [d.value[1], d.value[0]];\n      let x1 = d3.scale.linear().domain([0, d.value[d.value.length-1]]).range([0, width - margin.left - margin.right]);\n\n      let x0 = this.__chart__ || d3.scale.linear()\n        .domain([0, Infinity])\n        .range(x1.range());\n\n      let w0 = bulletWidth(x0);\n      let w1 = bulletWidth(x1);\n\n      let svg = d3.select(this).selectAll('svg').data([d]);\n      svg.enter().append('svg')\n          .attr('class', 'bullet')\n          .append('g')\n          .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n      svg.attr('width', width)\n         .attr('height', height);\n\n      let range = svg.select('g').selectAll('rect').data(values);\n\n      range.enter().append('rect')\n          .attr('class', (d,i) => 'range s' + i)\n          .attr('width', w0)\n          .attr('height', height)\n          //.attr('x', x0)\n        .transition()\n          .duration(duration)\n          .attr('width', w1);\n          //.attr('x', x1);\n\n      range.transition()\n        .duration(duration)\n        //.attr('x', x1)\n        .attr('width', w1)\n        .attr('height', height);\n\n      let labels = svg.select('g').selectAll('text').data(d.value);\n      labels.enter().append('text')\n        //.attr('class', (d, i) => 'range s' + i)\n        //.attr(\"text-anchor\", \"middle\")\n        //.attr(\"dy\", \"1em\")\n        .attr('y', 10)\n        .attr('x', (d, i) => i*(width-20));\n\n      labels.text( d => d);\n    });\n  }\n\n  bullet.width = function(x) {\n    if (!arguments.length) return width;\n    width = x;\n    return bullet;\n  };\n\n  return bullet;\n}\n"]}