{"version":3,"sources":["chart3.es6"],"names":[],"mappings":"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","file":"chart3.js","sourcesContent":["/**\n * Created by yarden on 8/11/15.\n */\n\nimport * as d3 from 'd3'\n\nexport default function(el, useRight) {\n\n  let series;\n  let AXIS_OFFSET = 20;\n  let margin = {top:5, right: 5+(hasRight && AXIS_OFFSET || 0), bottom: 15, left:5+AXIS_OFFSET};\n  let width = 350 - margin.left - margin.right,\n      height = 150 - margin.top - margin.bottom;\n  let hasRight = useRight || false;\n  let title;\n\n  let svg, svgContainer;\n\n  let x = d3.time.scale()\n    .range([0, width])\n    .nice(d3.time.week, 1);\n\n  let xAxis = d3.svg.axis()\n    .scale(x)\n    .orient('bottom')\n    .tickSize(3, 0)\n    .tickPadding(4)\n    .ticks(2);\n  //.tickFormat(d3.time.format(\"%m/%d\"));\n\n  let y = d3.scale.linear()\n    .range([height, 0]);\n\n  let yAxis = d3.svg.axis()\n    .scale(y)\n    .orient('left')\n    .tickSize(3)\n    .tickPadding(6)\n    .ticks(4);\n\n  let yr;\n\n  let yrAxis;\n  if (hasRight) {\n    yr = d3.scale.linear()\n      .range([height, 0]);\n\n    yrAxis = d3.svg.axis()\n      .scale(yr)\n      .orient('right')\n      .tickSize(3)\n      .tickPadding(6)\n      .ticks(2);\n  }\n\n  let line = d3.svg.line()\n    .x( d => { return x(d.x); })\n    .y( d => { return y(d.value); });\n\n  let area = d3.svg.area()\n    .x( d => { return x(d.x); })\n    .y0(height)\n    .y1( d => { return y(d.value); })\n    .interpolate('cardinal');\n\n  let zoom = d3.behavior.zoom()\n    .on('zoom', draw);\n\n  let selection = typeof el =='string' ? d3.select(el) : el;\n  selection.attr('class', 'chart');\n\n  width= parseInt(selection.style('width')) - margin.left - margin.right;\n  height = parseInt(selection.style('height')) - margin.top - margin.bottom;\n\n  svgContainer = selection.append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom);\n\n  svg = svgContainer.append('g')\n    .attr('transform', 'translate(' + margin.left + ',' + margin.top+ ')');\n\n  x.range([0, width]);\n  y.range([height, 0]);\n  if (hasRight) {\n    yr.range([height, 0]);\n  }\n\n  let xrange = x.range();\n  let yrange = y.range();\n\n  svg.append('text')\n    .attr('class', 'title')\n    .attr('x', 5)\n    .attr('y', 5)\n    .text(title);\n\n  svg.append('clipPath')\n    .attr('id', 'clip')\n    .append('rect')\n    .attr('x', xrange[0])\n    .attr('y', yrange[1])\n    .attr('width', xrange[1]-xrange[0])\n    .attr('height', yrange[0]-yrange[1]);\n\n  svg.append(\"g\")\n    .attr(\"class\", \"x axis\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\");\n\n  svg.append('g')\n    .attr('class', 'y axis')\n    .attr('transform', 'translate(0,0)');\n\n  if (hasRight) {\n    svg.append('g')\n      .attr('class', 'yr axis')\n      .attr('transform', 'translate(' + width + ',0)');\n  }\n\n  svg.append(\"path\")\n    .attr(\"class\", \"line\")\n    .attr(\"clip-path\", \"url(#clip\");\n\n  svg.append(\"rect\")\n    .attr(\"class\", \"pane\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .call(zoom);\n\n  function resize(w, h) {\n    svgContainer\n      .attr('width', w)\n      .attr('height', h);\n\n    width = w -margin.left - margin.right;\n    height = h -margin.top - margin.bottom;\n\n    x.range([0, width]);\n    xAxis.tickSize(3);\n\n    y.range([height, 0]);\n    yAxis.tickSize(3);\n\n    if (hasRight) {\n      yr.range([height, 0]);\n      yrAxis.tickSize(3);\n    }\n\n    let xrange = x.range();\n    let yrange = y.range();\n\n    area.y0(y(0));\n\n    svg.select('#clip rect')\n      .attr('x', xrange[0])\n      .attr('y', yrange[1])\n      .attr('width', xrange[1]-xrange[0])\n      .attr('height', yrange[0]-yrange[1]);\n\n    svg.select('g.x.axis')\n      .attr('transform', 'translate(0,' + height + ')');\n\n    //svg.select('g.y.axis')\n    //  .attr('transform', 'translate(' + width + ',0)');\n\n    svg.select('g.yr.axis')\n      .attr('transform', 'translate(' + width + ',0)');\n\n    svg.select('.pane')\n      .attr('width', width)\n      .attr('height', height)\n      .call(zoom);\n  }\n\n\n  function draw() {\n    if (series) {\n      svg.select('g.x.axis').call(xAxis);\n      svg.select('g.y.axis').call(yAxis);\n      if (hasRight) {\n        svg.select('g.yr.axis').call(yrAxis);\n      }\n\n      let ly = d => y(d.value);\n      let ry = hasRight ? d => yr(d.value) : ly;\n\n      let areas = svg.selectAll('.area')\n        .data(series.filter(d => d.type == 'area'));\n\n      areas.enter()\n        .append('path')\n        .attr('class', 'area')\n        .attr(\"clip-path\", \"url(#clip)\");\n\n      areas\n        .style('fill', d => { return d.color; })\n        .attr('d', d => area(d.values));\n\n      areas.exit().remove();\n\n      let lines = svg.selectAll('.line')\n        .data(series.filter(d => d.type == 'line'));\n\n      lines.enter()\n        .append('path')\n        .attr('class', 'line')\n        .attr(\"clip-path\", \"url(#clip)\");\n\n      lines\n        .attr('stroke', d => { return d.color; })\n        .attr('stroke-dasharray', d => { return d.marker == 'dash' ? '3' : '0'; })\n        .attr('d', d => line.y( d.right ? ry : ly ).interpolate(d.interpolate || 'cardinal')(d.values));\n\n      lines.exit().remove();\n    }\n  }\n\n  return {\n    title(name) {\n      title = name;\n      if (svg) svg.select('.title').text(title);\n      return this;\n    },\n\n    data(list) {\n      series = list;\n      if (series.length > 0) {\n        let n = series.length;\n        let x_min = series[0].values[0].x;\n        let x_max = series[0].values[series[0].values.length - 1].x;\n        let y_max = 0;\n        let yr_max = 0;\n        for(let s of series) {\n          let v = d3.max(s.values, d => d.value);\n          if (s.right) yr_max = Math.max(yr_max, v);\n          else y_max = Math.max(y_max, v);\n        }\n        x.domain([x_min, x_max]);\n        y.domain([0, y_max]);\n\n        yAxis.ticks(y_max > 3 && 3 || y_max);\n\n        if (hasRight) {\n          yr.domain([0, yr_max]);\n          yrAxis.ticks(yr_max > 3 && 3 || yr_max);\n        }\n\n        zoom.x(x);\n      }\n\n      draw();\n      return this;\n    },\n\n\n    resize(size) {\n      resize(size[0], size[1]);\n      draw();\n      return this;\n    },\n\n    xscale(s) {\n      if (!arguments.length) return x;\n      s.range([0, width]);\n      x = s;\n      xAxis.tickFormat(s.tickFormat());\n      xAxis.scale(x);\n      return this;\n    }\n  }\n}"]}