{"version":3,"sources":["info_selection.es6"],"names":[],"mappings":";;;;;;;;;;;;;AAUA,sBAAO,SAAS,CAAC,EAAC,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAC,CAAC,CAAC;;AAGzE,WAAS,MAAM,GAAG;AAChB,QAAI,IAAI,GAAG,EAAE;QAAE,KAAK,YAAA,CAAC;AACrB,QAAI,eAAa,QAAQ,CAAC,IAAI,GAAG,CAAC,EAAE;;;;;;AAClC,6BAAe,eAAa,QAAQ,8HAAE;cAA9B,GAAG;;AACT,eAAK,GAAG,SAVN,SAAS,CAUO,GAAG,CAAC,GAAG,CAAC,CAAC;AAC3B,cAAI,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,UAAU,EAAC,CAAC,CAAC;SACvD;;;;;;;;;;;;;;;KACF;;AAED,QAAI,eAAa,QAAQ,CAAC,IAAI,GAAG,CAAC,EAAE;;;;;;AAClC,8BAAe,eAAa,QAAQ,mIAAE;cAA9B,GAAG;;AACT,eAAK,GAAG,SAjBN,SAAS,CAiBO,GAAG,CAAC,GAAG,CAAC,CAAC;AAC3B,cAAI,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,UAAU,EAAC,CAAC,CAAC;SACvD;;;;;;;;;;;;;;;KACF;;AAED,QAAI,KAAK,GAAG,gBAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpE,SAAK,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC3B,SAAK,CAAC,IAAI,CAAC,UAAA,CAAC;aAAI,CAAC,CAAC,KAAK,CAAC,IAAI;KAAA,CAAC,CAC1B,IAAI,CAAC,OAAO,EAAE,UAAA,CAAC;aAAI,CAAC,CAAC,IAAI;KAAA,CAAC,CAC1B,EAAE,CAAC,OAAO,EAAE,UAAS,CAAC,EAAE;AACvB,UAAI,gBAAG,KAAK,CAAC,OAAO,EAAE;AAAE,uBAAa,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;OAAE,MACrC;AAAE,uBAAa,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;OAAE;KAC3D,CAAC,CAAC;;AAEL,SAAK,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,CAAC;GACvB","file":"info_selection.js","sourcesContent":["/**\n * Created by yarden on 11/19/15.\n */\n\nimport d3 from 'd3';\nimport postal from 'postal';\n\nimport {topicsMap} from './service';\nimport * as tagSelection from './tag_selection';\n\npostal.subscribe({channel: 'global', topic: 'render', callback: update});\n\n\nfunction update() {\n  let tags = [], topic;\n  if (tagSelection.selected.size > 0) {\n    for(let tid of tagSelection.selected) {\n      topic = topicsMap.get(tid);\n      tags.push({tid: tid, topic: topic, attr: 'selected'});\n    }\n  }\n\n  if (tagSelection.excluded.size > 0) {\n    for(let tid of tagSelection.excluded) {\n      topic = topicsMap.get(tid);\n      tags.push({tid: tid, topic: topic, attr: 'excluded'});\n    }\n  }\n\n  let items = d3.select('#selection-list').selectAll('li').data(tags);\n  items.enter().append('li');\n  items.text(d => d.topic.name)\n    .attr('class', d => d.attr)\n    .on('click', function(d) {\n      if (d3.event.metaKey) { tagSelection.exclude(d.topic.id); }\n      else                  { tagSelection.select(d.topic.id); }\n    });\n\n  items.exit().remove();\n}"]}